{
    # Global options
    admin off
}

# This will automatically use the domain Railway assigns to your service.
:{$PORT} {
    root * /app/dist/public
    
    encode gzip zstd

    # Handle API routes by proxying to your Node.js backend
    @api_paths path_regexp ^/api(?:$|/.*$)
    reverse_proxy @api_paths http://localhost:5000

    file_server

    try_files {path} {path}/ /index.html
}