{
    # Railway will inject the correct port settings.
    # This block can often be left empty or for global options.
}

# This will automatically use the domain Railway assigns to your service.
:80 { 
    root * /app/dist/public
    
    encode gzip zstd

    # Handle API routes by proxying to your Node.js backend
    @api_paths path_regexp ^/api(?:$|/.*$)
    reverse_proxy @api_paths http://localhost:5000 

    file_server

    try_files {path} {path}/ /index.html
}